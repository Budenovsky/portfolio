### Создать проект, в котором пока единственный тип запроса: "Запрос ЭЦП" 

|№|Проверка|Результат|Комментарий|
|:-|:-|:-|:-|
|1|тип запроса создан|ок| |
|1.1|название ОК: Отзыв доверенности|ок| |
|2|экран создания|ок| |
| |Под типом задачи должно быть предупреждение: Автором этого типа заявки могут быть следующие работники: руководители структурных подразделений, служб и отделов. Если ваша должность не относится к указанному перечню, для создания заявки обратитесь к своему руководителю.Обязательно красного цвета с выделением жирным.|ок| |
| |поля:|ок| |
|2.1|тема|ок| |
|2.1.1|обязательное|ок| |
|2.1.2|.формулировка: Отзыв доверенности$ФИО|ок| |
|2.1.3|если несколько раз изменить пид|ок| |
|2.2|пид|ок| |
|2.2.1|обязательное|ок| |
|2.2.2|под полем отображаются все заявки такого же типа запрос с таким же пид|ок| |
|2.2.2.1|-заявок нет|ок | |
|2.2.2.2|-заявка одна|ок | |
|2.2.2.3|-заявок несколько|ок | |
|2.3|ФИО|ок| |
|2.3.1|обязательное|ок| |
|2.3.2|заполняется по пиду|ок| |
|2.3.3|если несколько раз изменить пид|ок| |
|2.4|должность сотрудника|ок| |
|2.4.1|обязательное|ок| |
|2.4.2|каскадный список|ок| |
|2.5|отозвать доверенность|ок| |
|2.5.1|обязательное|ок| |
|2.5.2|? выпадающий список, опции:|ок| |
|2.5.3|все доверенности|ок| |
|2.5.4|конкретную доверенность|ок| |
|2.6|номер доверенности|ок| |
|2.6.1|доступен только при выборе опции "конкретную доверенность" в предыдущем пункте|ок| |
|2.6.2|обязательное|ок| |
|2.6.3|поле меток, где можно ввести несколько номеров (предполагаю, как в поле пид)|ок| |
|2.6.3.1|-один номер|ок| |
|2.6.3.2|-несколько номеров|ок| |
|2.6.4|заполнить и изменить опцию в предыдущем поле на "все доверенности" - поле очищается|не ок|[Баг-репорт 1](https://github.com/Budenovsky/portfolio/tree/main/bug_reports/bug_report_1)|
|2.7|площадка|ок| |
|2.7.1|обязательное|ок| |
|2.7.2|заполняется по пиду|ок| |
|2.7.3|если несколько раз изменить пид|ок| |
|2.8|организация|ок| |
|2.8.1|заполнено по умолчанию значением "РФ-1"|ок| |
|2.8.2|редактировать невозможно|ок| |
|2.9|Дата отзыва доверенности|ок| |
|2.9.1|обязательное|ок| |
|2.9.2|календарь|ок| |
|2.9.3|меньше текущей даты нельзя|ок| |
|2.9.4|текущая дата|ок| |
|2.9.5|дата в удущем|ок| |
|3|экран редактирования - все поля|ок | |
|4|способы создания запроса|ок| |
|4.1|вручную|ок | |
|4.1.1|доступен заказчику|ок | |
|4.1.2|доступен всем|ок | |
|4.2|При создании заявки «ОК: Увольнение сотрудника NEW"|ок | |
|4.2.1|на экране создания под полем "должность сотрудника" добавлен чек-бокс "доверенность"|ок | |
|4.2.2|в чек-боксе доступна опция "У работниканеобходимо отозвать доверенность"|ок | |
|4.2.3|при выборе опции появляются поля:|ок | |
|4.2.4|«Отозвать доверенность» и «Номер доверенности»|ок | |
|4.2.4.1|проверки 2.5.1-2.6.4|ок | |
|4.2.5|после создания запроса на увольнение также создается запрос ОК: Отзыв доверенности|ок | |
|4.2.6|связанный|ок | |
|4.2.7|поля скопированы корректно|ок | |
|4.2.8|в ОК: Отзыв доверенности "дата отзыва доверенности" = "дата увольнения"|ок | | |
|4.2.9|доступно заказчику|ок | |
|4.2.10|на экране редактирования доступны все поля|ок | |
|4.3|При создании заявки «ОК: Перевод сотрудника»|ок| |
|4.3.1|на экране создания под полем "должность сотрудника" добавлен чек-бокс "доверенность"|ок | |
|4.3.2|в чек-боксе доступна опция "У работниканеобходимо отозвать доверенность"|ок | |
|4.3.3|при выборе опции появляются поля:|ок | |
|4.3.4|«Отозвать доверенность» и «Номер доверенности»|ок | |
|4.3.4.1|проверки 2.5.1-2.6.4|ок | |
|4.3.5|после создания запроса на перевод также создается запрос ОК: Отзыв доверенности|ок | | |
|4.3.5.1|связанный|ок | |
|4.3.5.2|поля скопированы корректно|ок |.|
|4.3.5.3|в ОК: Отзыв доверенности "дата отзыва доверенности" = "дата перевода"|ок | | |
|4.3.6|доступно заказчику|ок | |
|4.3.7|на экране редактирования доступно|ок | |
|5|БП|ок | |
|5.1|первоначальный статус - открыт|ок | |
|5.1.1|в связанные добавлены все запросы ОК: оформление доверенности с таким же пид|ок | |
|5.1.1.1|-если создаются из других заявок?|ок | |
|5.1.1.2|переходы:ок|ок | |
|5.1.2|отменить (в статус закрыт)|ок | |
|5.1.2.1|экран с обязательным вводом комментария|ок | |
|5.1.2.2|доступно админам и группе k_users|ок | |
|5.1.2.3|? резолюция проставляется|ок| |
|5.1.3|взять в работу (в статус "в работе")|ок| |
|5.1.3.1|доступно админам и группе k_users|ок | |
|5.2|в работе|ок | |
| |переходы:|ок | |
|5.2.1|отменить (в статус закрыт)|ок | |
|5.2.1.1|условия те же|ок | |
|5.2.2|уточнить данные (в "ждем ответа")|ок | |
|5.2.2.1|экран с обязательным вводом комментария|ок | |
|5.2.2.2|доступно админам и группе k_users|ок | |
|5.2.3|Извещение подготовлено (в статус "требуется подтверждение")|ок | |
|5.2.3.1|экран с обязательным добавлением вложения|ок | |
|5.2.3.2|доступно админам и группе k_users|ок | |
|5.2.3.3|отправляется сообщение на почту ген дира|ок | |
|5.2.3.4|текст: «Подготовлено извещение об отзыве доверенности: / ФИО, должность / Дата отзыва доверенности –ХХ.ХХ.ХХХХ г. / Инициатор отзыва доверенности –ФИО автора заявки / ссылка на заявку»|не ок|[Баг-репорт 2](https://github.com/Budenovsky/portfolio/tree/main/bug_reports/bug_report_2) |
|5.3|ждем ответа|ок | |
|5.3.1|переход: ответ получен (в "ответ получен")|ок| |
|5.3.2|экран с обязательным вводом комментария|ок | |
|5.3.3|условия отсутствуют|ок | |
|5.4|ответ получен|ок | |
| |переходы:|ок | |
|5.4.1|отменить (в статус закрыт)|ок | |
|5.4.1.1|условия те же|ок | |
|5.4.2|взять в работу (в статус "в работе")|ок | |
|5.4.2.1|условия те же|ок | |
|5.5|требуется подтверждение|ок | |
| |переходы:|ок | |
|5.5.1|уведомление подписано (в "необходимо подписать документы")|ок | |
|5.5.1.1|доступно админам и офис менеджеру|ок | |
|5.5.1.2|офис-менеджер может видеть запрос|ок | |
|5.5.2|Уведомление отклонено (в статус закрыт)|ок | |
|5.5.2.1|экран с обязательным комментарием|ок | |
|5.5.2.2|доступно админам и офис менеджеру|ок | |
|5.5.2.3|проставляется резолюция|ок | |
|5.6|необходимо подписать документы|ок | |
|5.6.1|переход - документы подписаны (в закрыт)|ок | |
|5.6.1.1|экран с обязательным вложением|ок | |
|5.6.1.2|доступно админам и группе k_users|ок | |
|5.6.1.3|резолюция проставляется|ок | |
|5.6.2|переход - извещение отправлено (в статус "закрыт")|ок | |
|5.6.2.1|экран с обязательными полями "дата отправки" и "адрес отправки"|ок | |
|5.6.2.2|доступно админам и офис менеджеру(+возможно исполнителю, тк в тз ссылка на тип запроса "оформление доверенности)|ок | |
|5.6.2.3|резолюция проставляется|ок | |
|6|отображение на РС|ок | |
|6.1|запрос отображается на РС "Оформление доверенности"|ок | |
|6.2|В статусе Открыт –в фильтре «Новые заявки»|ок | |
|6.3|В статусе В работе –в фильтре «Заявки в работе»|ок | |
|7|возможность создания "ОК: Отзыв доверенности" при любом значении поля "Изменить"|ок | |
|UPD| | | |
|8.0|Для заявок на увольнение и перевод предусмотреть переход, в котором при изменении значения чек-бокса "У работника необходимо отозвать доверенность" заявка "ОК: отзыв доверенности" будет создана/отменена в зависимости от значения чек-бокса.|ок | |
|8.1|переход для изменения доверенности создан: реализовано при помощи чек бокса на экране редавтирования|ок |вместо перехода используется экран редактирования|
|8.2|доступен заказчику|ок | |
|9|Отзыв доверенности создается при создании Перевод сотрудника и Увольнение сотрудника|ок| |
|9.1|создан ОК перевод - создается ОК Отзыв|ок | |
|9.2|создан ОК увольнение - создается ОК Отзыв|ок | |
|10|Отзыв доверенности создается, когда на экране редактирования проставляется чек-бокс "У работника необходимо отозвать доверенность в запросах" Перевод сотрудника и Увольнение сотрудника|ок | |
|10.1|на экране редактирования ОК Перевод проставлен чек бокс об отзыве - создается ОК Отзыв|ок| |
|10.2|на экране редактирования ОК Увольнение проставлен чек бокс об отзыве - создается ОК Отзыв|ок | |
|11|Отзыв доверенности отменяется, когда на экране редактирования отменяется проставление чек-бокса №У работника необходимо отозвать доверенность" в запросах Перевод сотрудника и Увольнение сотрудника|ок | |
|11.1|на экране редактирования ОК Перевод отменяется чек бокс об отзыве - отменяется ОК Отзыв|ок | |
|11.2|на экране редактирования ОК Увольнение отменяется чек бокс об отзыве - отменяется ОК Отзыв|ок | |
|12|комментарий в открытых связанных Отзывах доверенности, когда Перевод Отменен и Увольнение Отменен|ок| |
|12.1|отменить ОК Перевод - коммент в ОК Отзыв|ок| |
|12.2|отменить ОК Увольнение - коммент в ОК Отзыв|ок| |
|13|комментарий в открытых связанных Отзывах доверенности, когда Перевод или Увольнение Переоткрыт|ок| |
|13.1|переоткрыть ОК Перевод - коммент в ОК Отзыв|ок| |
|13.2|переоткрыть ОК Увольнение - коммент в ОК Отзыв|ок| |
|14|комментарий в открытых связанных Отзывах доверенности, когда в Переводе или Увольнении ИЗМЕНИЛИ поля Отозвать доверенность и/или Номер доверенности|ок| |
|14.1|изменить значение поля Отозвать доверенность и/или Номер доверенности в ОК Перевод - коммент в ОК Отзыв|ок | |
|14.2|изменить значение поля Отозвать доверенность и/или Номер доверенности в ОК Увольнение - коммент в ОК Отзыв|ок| |
|15|зависимость даты отзыва "ОК: Отзыв доверенности" и даты перевода ОК: Перевод сотрудника|ок| |
|15.1|создать ОК: Перевод сотрудника (отзыв доверенности нужен), где дата перевода = прошедшая дата|ок | |
|15.2|в связанном "ОК: Отзыв доверенности" Дата отзыва доверенности = дата создания родительской|ок | |
|16.1|создать ОК: Перевод сотрудника (отзыв доверенности нужен), где дата перевода = текущая дата|ок | |
|16.2|в связанном "ОК: Отзыв доверенности" Дата отзыва доверенности = дата создания родительской|ок | |
|17.1|создать ОК: Перевод сотрудника (отзыв доверенности нужен), где дата перевода = будущая дата|ок | |
|17.2|в связанном "ОК: Отзыв доверенности" Дата отзыва доверенности = дата перевода (из родительской)|ок | |
| | | | |
#### Баг-репорты к данной задаче:
[Баг-репорт 1.](https://github.com/Budenovsky/portfolio/tree/main/bug_reports/bug_report_1) Поле "Номер доверенности" не очищается при изменении поля "отозвать доверенность" на экране создания запроса типа ОК: Отзыв доверенности. <br>
[Баг-репорт 2.](https://github.com/Budenovsky/portfolio/tree/main/bug_reports/bug_report_2) В рассылке в запросе типа OK: Отзыв доверенности (переход Извещение подготовлено) указывается системный пользователь, если запрос создан из запроса на увольнение сотрудника. <br>
[Баг-репорт 3.](https://github.com/Budenovsky/portfolio/tree/main/bug_reports/bug_report_3) Невозможно создать запрос типа OK: Отзыв доверенности из-за ошибки "Код проекта: Код проекта обязательно." (код проекта отсутствует на экране создания, его быть и не должно).
